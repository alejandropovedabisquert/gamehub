<!-- TODO: Implementar iconos de plataformas -->
<div class="game-list">
  <h2>Game List</h2>
  @if(isInitialLoading$ | async) {
  <div class="loading skeleton-cards">
    @for (skeleton of skeletonCardsArray; track skeleton) {
    <div class="skeleton-card"></div>
    }
  </div>
  } @else {
  <div class="game-cards">
    @for (game of (currentResults$ | async); track game.id) {
    <div class="game-card">
      <img src="{{ game.background_image }}" alt="" />
      <div class="game-card-content">
        <div class="platform_icons">
          <div class="icons">
            @for (platform of game.parent_platforms; track platform.platform.id) {
            <img
              [src]="'/platform_icons/' + platform.platform.slug + '.svg'"
              [alt]="platform.platform.name"
              [title]="platform.platform.name"
            />
            } @empty {
            <span>No platforms</span>
            }
          </div>
        </div>
        <div class="metacritic" [ngClass]="getMetacriticClass(game.metacritic)">
          {{ game.metacritic ?? 'N/A' }}
        </div>
        <a [routerLink]="['/game', game.slug]">
          <p>{{ game.name }}</p>
        </a>
        <div class="info-extra">
          <div class="extra release-date">
            <p>
              <strong>Release Date:</strong>
            </p>
            <p>{{ game.released | date }}</p>
          </div>
          <div class="separator"></div>
          <div class="extra genres">
            <p><strong>Genres:</strong></p>
            <p>
              @for (genre of game.genres; track genre.id; let isLast = $last) {
              <span class="genre">{{ genre.name }}</span>
              @if (!isLast) {
              <span>, </span>
              } } @empty {
              <span class="genre">Sin g√©neros</span>
              }
            </p>
          </div>
        </div>
      </div>
    </div>
    } @empty {
    <p>No hay juegos disponibles.</p>
    }
  </div>
  }
</div>
@if (isLoadingMore$ | async) {
<div class="loading">
  <img src="minimal-spinner.svg" alt="">
</div>
}
<div id="load-more" #observableGameList></div>
